!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("react"),require("final-form")):"function"==typeof define&&define.amd?define(["exports","react","final-form"],t):t((e=e||self)["react-final-form"]={},e.React,e.FinalForm)}(this,function(e,N,O){"use strict";var F="default"in N?N.default:N;function z(){return(z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function U(e,t){if(null==e)return{};var n,r,i={},u=Object.keys(e);for(r=0;r<u.length;r++)n=u[r],0<=t.indexOf(n)||(i[n]=e[n]);return i}function E(e,t){var n=e.render,r=e.children,i=e.component,u=U(e,["render","children","component"]);return i?N.createElement(i,z({},u,{children:r,render:n})):n?n(void 0===r?u:z({},u,{children:r})):"function"!=typeof r?null:r(u)}function _(t){return void 0===t&&(t={}),Object.keys(t).filter(function(e){return!0===t[e]}).map(function(e){return e}).sort().join(",")}function I(e){var t=N.useContext(V);if(!t)throw new Error("Warning: "+(e||"useForm")+" must be used inside of a <Form> component");return t}function L(e,t){return void 0===e?"":e}function W(e,t){return""===e?void 0:e}function C(n,e){var t=void 0===e?{}:e,r=t.afterSubmit,i=t.allowNull,u=t.beforeSubmit,a=t.component,o=t.defaultValue,c=t.format,l=void 0===c?L:c,f=t.formatOnBlur,s=t.initialValue,d=t.isEqual,v=t.multiple,m=t.parse,p=void 0===m?W:m,b=t.subscription,g=void 0===b?G:b,y=t.type,h=t.validate,S=t.validateFields,O=t.value,F=I("useField"),E=N.useRef(h);function C(e){return F.registerField(n,e,g,{afterSubmit:r,beforeSubmit:function(){return V.current&&V.current()},defaultValue:o,getValidator:function(){return E.current},initialValue:s,isEqual:d,validateFields:S})}N.useEffect(function(){E.current=h});var V=N.useRef(),w=N.useRef(!0),k=N.useState(function(){var t={};return C(function(e){t=e})(),t}),x=k[0],R=k[1];V.current=function(){if(l&&f){var e=l(x.value,x.name);e!==x.value&&x.change(e)}return u&&u()};var j=_(g);N.useEffect(function(){return C(function(e){w.current?w.current=!1:R(e)})},[n,o,s,d,S,j]);var q={onBlur:N.useCallback(function(e){x.blur(),l&&f&&x.change(l(x.value,x.name))},[x.name,x.value,l,f]),onChange:N.useCallback(function(e){var t=e&&e.target?function(e,t,n,r){if(!r&&e.nativeEvent&&void 0!==e.nativeEvent.text)return e.nativeEvent.text;if(r&&e.nativeEvent)return e.nativeEvent.text;var i=e.target,u=i.type,a=i.value,o=i.checked;switch(u){case"checkbox":if(void 0===n)return!!o;if(o)return Array.isArray(t)?t.concat(n):[n];if(!Array.isArray(t))return t;var c=t.indexOf(n);return c<0?t:t.slice(0,c).concat(t.slice(c+1));case"select-multiple":return function(e){var t=[];if(e)for(var n=0;n<e.length;n++){var r=e[n];r.selected&&t.push(r.value)}return t}(e.target.options);default:return a}}(e,x.value,O,M):e;x.change(p?p(t,n):t)},[O,n,p,x.change,x.value,y]),onFocus:N.useCallback(function(e){x.focus()},[])},B=(x.blur,x.change,x.focus,x.value),P=(x.name,U(x,["blur","change","focus","value","name"])),A={active:P.active,data:P.data,dirty:P.dirty,dirtySinceLastSubmit:P.dirtySinceLastSubmit,error:P.error,initial:P.initial,invalid:P.invalid,length:P.length,modified:P.modified,pristine:P.pristine,submitError:P.submitError,submitFailed:P.submitFailed,submitSucceeded:P.submitSucceeded,submitting:P.submitting,touched:P.touched,valid:P.valid,visited:P.visited};f?B=L(B):l&&(B=l(B,n)),null!==B||i||(B="");var D=z({name:n,value:B,type:y},q);return"checkbox"===y?void 0===O?D.checked=!!B:(D.checked=!(!Array.isArray(B)||!~B.indexOf(O)),D.value=O):"radio"===y?(D.checked=B===O,D.value=O):"select"===a&&v&&(D.value=D.value||[],D.multiple=!0),{input:D,meta:A}}var M="undefined"!=typeof window&&window.navigator&&window.navigator.product&&"ReactNative"===window.navigator.product,V=N.createContext(),G=O.fieldSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});function w(e,t,n){void 0===n&&(n=function(e,t){return e===t});var r=F.useRef(e);F.useEffect(function(){n(e,r.current)||(t(),r.current=e)})}function k(e,t){if(e===t)return!0;if("object"!=typeof e||!e||"object"!=typeof t||!t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var i=Object.prototype.hasOwnProperty.bind(t),u=0;u<n.length;u++){var a=n[u];if(!i(a)||e[a]!==t[a])return!1}return!0}function x(e){return!(!e||"function"!=typeof e.stopPropagation)}function a(e){var t=void 0===e?{}:e,n=t.onChange,r=t.subscription,i=void 0===r?j:r,u=I("useFormState"),a=N.useRef(!0),o=N.useState(function(){var t={};return u.subscribe(function(e){t=e},i)(),n&&n(t),t}),c=o[0],l=o[1],f=_(i);return N.useEffect(function(){return u.subscribe(function(e){a.current?a.current=!1:(l(e),n&&n(e))},i)},[f]),c}var t="5.1.0",R={"final-form":O.version,"react-final-form":t},j=O.formSubscriptionItems.reduce(function(e,t){return e[t]=!0,e},{});e.Field=function(e){var t=e.afterSubmit,n=e.allowNull,r=e.beforeSubmit,i=e.children,u=e.component,a=e.defaultValue,o=e.format,c=e.formatOnBlur,l=e.initialValue,f=e.isEqual,s=e.multiple,d=e.name,v=e.parse,m=e.subscription,p=e.type,b=e.validate,g=e.validateFields,y=e.value,h=U(e,["afterSubmit","allowNull","beforeSubmit","children","component","defaultValue","format","formatOnBlur","initialValue","isEqual","multiple","name","parse","subscription","type","validate","validateFields","value"]),S=C(d,{afterSubmit:t,allowNull:n,beforeSubmit:r,children:i,component:u,defaultValue:a,format:o,formatOnBlur:c,initialValue:l,isEqual:f,multiple:s,parse:v,subscription:m,type:p,validate:b,validateFields:g,value:y});return"function"==typeof i?i(z({},S,h)):"string"==typeof u?N.createElement(u,z({},S.input,{children:i},h)):E(z({},S,{children:i,component:u},h))},e.Form=function(e){var t=e.debug,n=e.decorators,r=e.destroyOnUnregister,i=e.initialValues,u=e.initialValuesEqual,a=e.keepDirtyOnReinitialize,o=e.mutators,c=e.onSubmit,l=e.subscription,f=void 0===l?j:l,s=e.validate,d=e.validateOnBlur,v=U(e,["debug","decorators","destroyOnUnregister","initialValues","initialValuesEqual","keepDirtyOnReinitialize","mutators","onSubmit","subscription","validate","validateOnBlur"]),m={debug:t,destroyOnUnregister:r,initialValues:i,keepDirtyOnReinitialize:a,mutators:o,onSubmit:c,validate:s,validateOnBlur:d},p=function(e){var t=F.useRef();return t.current||(t.current=e()),t.current}(function(){var e=O.createForm(m);return e.pauseValidation(),e}),b=N.useState(function(){var t={};return p.subscribe(function(e){t=e},f)(),t}),g=b[0],y=b[1],h=_(f);N.useEffect(function(){p.isValidationPaused()&&p.resumeValidation();var e=[p.subscribe(function(e){k(e,g)||y(e)},f)].concat(n?n.map(function(e){return e(p)}):[]);return function(){e.forEach(function(e){return e()})}},[n,h]),w(t,function(){p.setConfig("debug",t)}),w(r,function(){p.setConfig("destroyOnUnregister",r)}),w(i,function(){p.setConfig("initialValues",i)},u||k),w(a,function(){p.setConfig("keepDirtyOnReinitialize",a)}),w(o,function(){p.setConfig("mutators",o)}),w(c,function(){p.setConfig("onSubmit",c)}),w(s,function(){p.setConfig("validate",s)}),w(d,function(){p.setConfig("validateOnBlur",d)});var S=z({},g,{form:z({},p,{reset:function(e){x(e)?p.reset():p.reset(e)}}),handleSubmit:function(e){return e&&("function"==typeof e.preventDefault&&e.preventDefault(),"function"==typeof e.stopPropagation&&e.stopPropagation()),p.submit()}});return N.createElement(V.Provider,{value:p},E(z({},v,S,{__versions:R})))},e.FormSpy=function(e){var t=e.onChange,n=e.subscription,r=U(e,["onChange","subscription"]),i=N.useContext(V);if(!i)throw new Error("Warning: FormSpy must be used inside of a ReactFinalForm component");var u=a({onChange:t,subscription:n});return t?null:E(z({},r,u,{form:z({},i,{reset:function(e){x(e)?i.reset():i.reset(e)}})}))},e.ReactFinalFormContext=V,e.context=V,e.useField=C,e.useForm=I,e.useFormState=a,e.version=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=react-final-form.umd.min.js.map
